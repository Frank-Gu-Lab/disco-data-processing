

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>data_wrangling_helpers module &mdash; disco-data-processing 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="disco-data-processing module" href="disco-data-processing.html" />
    <link rel="prev" title="data_wrangling_functions module" href="data_wrangling_functions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> disco-data-processing
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">src</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data_merging.html">data_merging module</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_wrangling_functions.html">data_wrangling_functions module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">data_wrangling_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="disco-data-processing.html">disco-data-processing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_analyze.html">data_analyze module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../test_modules/modules.html">tests</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">disco-data-processing</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">src</a> &raquo;</li>
        
      <li>data_wrangling_helpers module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/source/src_modules/data_wrangling_helpers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-data_wrangling_helpers">
<span id="data-wrangling-helpers-module"></span><h1>data_wrangling_helpers module<a class="headerlink" href="#module-data_wrangling_helpers" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.DropComplete">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">DropComplete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.DropComplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if [Cc]omplete is a substring of x.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>bool</dt><dd><p>False if [Cc]omplete is a substring, otherwise True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.attenuation_calc_equality_checker">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">attenuation_calc_equality_checker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_or_book</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'book'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.attenuation_calc_equality_checker" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions checks to see if two subset dataframes for the attenuation calculation are equal and in the same order 
in terms of their fixed experimental parameters: ‘sample_or_control’, ‘replicate’, ‘title_string’, ‘concentration’, and
‘sat_time’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df1, df2</strong><span class="classifier">Pandas.DataFrame</span></dt><dd><p>DataFrames involved in the attenuation calculation, one where irrad bool is true and one where irrad bool is false.</p>
</dd>
<dt><strong>batch_or_book</strong><span class="classifier">str, {‘book’, ‘batch’}</span></dt><dd><p>String indicating the DataFrame’s format. The default runs the ‘book’ path, but will run the ‘batch’ path 
if indicated in the third argument.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>bool</dt><dd><p>Returns True if the subset dataframes are equal, otherwise False.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>If the passed dataframes do not have the same shape.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.corrected_attenuation_calc_equality_checker">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">corrected_attenuation_calc_equality_checker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.corrected_attenuation_calc_equality_checker" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions checks to see if the three subset dataframes for calculating the corrected % attenuation
are equal and in the same order in terms of their shared fixed experimental parameters: ‘replicate’, ‘concentration’, and
‘sat_time’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df1, df2, df3</strong><span class="classifier">Pandas.DataFrame</span></dt><dd><p>DataFrames involved in the corrected attenuation calculation.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>bool</dt><dd><p>Returns True if the subset dataframes are equal, otherwise False.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>If the passed dataframes do not have the same shape.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.count_sheets">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">count_sheets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_sheets</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.count_sheets" title="Permalink to this definition">¶</a></dt>
<dd><p>This function counts the number of sample and control datasheets from which data will be extracted for further processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name_sheets</strong><span class="classifier">list</span></dt><dd><p>List of sheet names.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>num_samples</strong><span class="classifier">int</span></dt><dd><p>Number of sheets containing sample data.</p>
</dd>
<dt><strong>num_controls</strong><span class="classifier">int</span></dt><dd><p>Number of sheets containing control data.</p>
</dd>
<dt><strong>sample_control_initializer</strong><span class="classifier">list</span></dt><dd><p>List of Excel sheets containing all sample and control data.</p>
</dd>
<dt><strong>sample_replicate_initializer</strong><span class="classifier">list</span></dt><dd><p>List of integers containing the replicate number of each sample sheet in sample_control_initializer.</p>
</dd>
<dt><strong>control_replicate_initializer</strong><span class="classifier">list</span></dt><dd><p>List of integers containing the replicate number of each control sheet in sample_control_initializer.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.get_dofs">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">get_dofs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peak_indices_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.get_dofs" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates the number of degrees of freedom (i.e. number of experimental replicates minus one) for statistical calculations 
using the “indices array” of a given experimenal set as input.</p>
<p>Input should be in the format: (in format: 11111 22222 3333 … (specifically, it should be the proton_peak_index column from the “regrouped_df” above)
where the count of each repeated digit minus one represents the degrees of freedom for that peak (i.e. the number of replicates -1).
With zero based indexing, the function below generates the DOFs for the input array of proton_peak_index directly, in a format
that can be directly appended to the stats table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peak_indices_array</strong><span class="classifier">NumPy.array</span></dt><dd><p>NumPy array representing the proton_peak_index column from the “regrouped_df” from prep_mean_data_for_stats.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dof_list</strong><span class="classifier">list</span></dt><dd><p>List containing the DOFs for peak_indices_array.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.initialize_excel_batch_replicates">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">initialize_excel_batch_replicates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.initialize_excel_batch_replicates" title="Permalink to this definition">¶</a></dt>
<dd><p>This function determines the unique polymers contained in an excel book, the number of replicates of those polymers, 
and also returns an iterable of the sheet names without Complete in them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>b</strong><span class="classifier">str</span></dt><dd><p>Path file to the Excel Batch file of interest.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>unique_polymers</strong><span class="classifier">list</span></dt><dd><p>List of unique polymer names contained in b.</p>
</dd>
<dt><strong>unique_polymer_replicates</strong><span class="classifier">list</span></dt><dd><p>List of number of replicates for each unique polymer.</p>
</dd>
<dt><strong>all_sheets_complete_removed</strong><span class="classifier">list</span></dt><dd><p>List of sheet names in b without Complete in them.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.wrangle_batch">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">wrangle_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_sheets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replicate_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.wrangle_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions takes in a list of Excel sheets and translates it into a usable Pandas.DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>b</strong><span class="classifier">str</span></dt><dd><p>Path file to the Excel Batch file of interest.</p>
</dd>
<dt><strong>name_sheets</strong><span class="classifier">list</span></dt><dd><p>List of sheet names in b without Complete in them.</p>
</dd>
<dt><strong>replicate_index</strong><span class="classifier">list</span></dt><dd><p>List of integers representing the replicate index of the Excel sheets in name_sheets.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>list_of_clean_dfs</strong><span class="classifier">list</span></dt><dd><p>List of tuples, where each tuple contains (‘polymer_name’, CleanPolymerDataFrame)
Tuples are in a “key-value pair format”, where the key (at index 0 of the tuple) is:
current_book_title, a string containing the title of the current excel input book
And the value (at index 1 of the tuple) is:
clean_df, the cleaned pandas dataframe corresponding to that book title!</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.wrangle_book">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">wrangle_book</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_sheets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_control_initializer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_replicate_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.wrangle_book" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions takes in a list of Excel sheets and translates it into a usable Pandas.DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>b</strong><span class="classifier">str</span></dt><dd><p>Path file to the Excel Batch file of interest.</p>
</dd>
<dt><strong>name_sheets</strong><span class="classifier">list</span></dt><dd><p>List of sheet names in b without Complete in them.</p>
</dd>
<dt><strong>sample_control_initializer</strong><span class="classifier">list</span></dt><dd><p>List of sheets with control data to be initialized into a Pandas.DataFrame.</p>
</dd>
<dt><strong>total_replicate_index</strong><span class="classifier">list</span></dt><dd><p>List of integers representing the replicate index of each sheet in sample_control_initializer.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>df_list</strong><span class="classifier">list</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="data_wrangling_helpers.y_hat_fit">
<span class="sig-prename descclassname"><span class="pre">data_wrangling_helpers.</span></span><span class="sig-name descname"><span class="pre">y_hat_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_wrangling_helpers.y_hat_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns y_ikj_hat as the fit model based on alpha and beta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>t</strong><span class="classifier">NumPy.array</span></dt><dd><p>NumPy array representing all the variable saturation times for each unique proton.</p>
</dd>
<dt><strong>a</strong><span class="classifier">float</span></dt><dd><p>Least-squares curve fitting parameter, represents STDmax. the asymptomic maximum of the build-up curve.</p>
</dd>
<dt><strong>b</strong><span class="classifier">float</span></dt><dd><p>Least-squares curve fitting parameter, represents -k_sat, the negative of the rate constant related to the relaxation
properties of a given proton.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>NumPy.array</dt><dd><p>NumPy array representing the output values of the fit model based on alpha and beta.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Some useful scipy example references for curve fitting:
1) <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.least_squares.html#scipy.optimize.least_squares">https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.least_squares.html#scipy.optimize.least_squares</a>
2) <a class="reference external" href="https://lmfit.github.io/lmfit-py/model.html">https://lmfit.github.io/lmfit-py/model.html</a>
3) <a class="reference external" href="https://astrofrog.github.io/py4sci/_static/15.%20Fitting%20models%20to%20data.html">https://astrofrog.github.io/py4sci/_static/15.%20Fitting%20models%20to%20data.html</a></p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="disco-data-processing.html" class="btn btn-neutral float-right" title="disco-data-processing module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="data_wrangling_functions.html" class="btn btn-neutral float-left" title="data_wrangling_functions module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Jeffrey Watchorn, Samantha Stuart, Jennifer Tram Su.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>